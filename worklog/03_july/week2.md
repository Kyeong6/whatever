# 업무내용

- 파이프라인 질문사항 작성

## 7/8

### 질문사항

1. 센서를 통해 얻는 데이터 간격을 어떻게 설정할 것인가?  
   
    - 10분이라고 했을 때 0~10분 데이터를 다 받는 것인지, 아니면 10분 값 하나 만 받는 것인지?
  
    - 결국 웹사이트에서 어떻게 표현할 것인지가 답이 될 것
  
    - 질문에 대한 답변을 통해 DB 선택 가능
  
2. 결과값 데이터 전송 간격도 센서를 통해 얻는 데이터 간격과 동일하게 하면 되는 것인지?
   
3. 현재 관리자가 특정 기간에 데이터를 확보한다고 했는데, 기기에서 사내 중앙 서버로 보내는 과정은 존재하니 중앙 서버에서 따로 DB를 구축해서 기기 별로 데이터 저장하는 것이 어떤지?
    - 관리자가 장치에 접근하여 데이터 확보하는 방법의 모호함에서 비롯된 의문
  
4. 이상치도 예측값으로 전달(알림)하는지? 
    - 실제 이상치일 때 전달인지, 예측값을 통해 얻은 이상치가 나올 경우를 전달하는지?
  
    - 실제 이상치 : 실시간성을 반영한 DB 사용 고려
  
    - 예측값 이상치 : 실시간성 반영 DB 사용 대신 일반적인 DB 사용 고려
<br/></br>

### 파이프라인 구성

![Untitled](https://github.com/Kyeong6/whatever/assets/100195725/a41ae72c-678a-46dd-8306-ebbbc0f00f57)
<br/></br>

**Our works**

| No. | Work | Description |
| --- | --- | --- |
| 1 | 데이터 확인 | Sensor를 통해 얻은 데이터 형식을 확인 |
| 2 | DB 선택 | Raw data를 저장할 데이터베이스 선택 |
| 3 | DB 테이블 구성 및 적재 | Raw data 테이블 구조에 맞게 적재 |
| 4 | DB 조회 후 형식 변환 | DB에 적재된 데이터를 LSTM 모델 예측을 수행할 수 있게 CSV 형식으로 변환 후 Input 디렉토리에 위치 |
| 5 | 데이터 형식 변환 | 예측 수행을 위한 데이터 형식 변환 [0] : 시간(datetime), [1] : 실제값(float) |
| 6 | 예측 수행 | 예측값 저장 : Output/Prediction/prediction.csv<br>이상치 : 10min<br>예측값 : 1hr |
| 7 | 예측값 전송 | CSV(prediction.csv) 파일 API로 전송<br>전송 방식 : requests 라이브러리 사용<br>(전송 방식은 Front 요청에 따라 JSON 형식으로 변환 후 전송할 수 있음) |
| 8 | 예측값 저장 | 예측값을 저장(아래 중 택 1), 설정한 주기가 되면 중앙 서버로 전송,<br>혹은 전송만 하고 중앙서버에 저장 및 처리하는 방식(기기 저장하는 이유 사라짐)<br>1. csv 파일을 특정 디렉토리에 저장<br>2. DB 예측값 컬럼에 값 저장(범위를 통해 조회한 후 전송 진행) |
| 9 | 스케줄러 도입 | 위 과정을 설정한 각 주기에 따라 백그라운드 실행 |
