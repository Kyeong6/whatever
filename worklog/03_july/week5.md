# 업무내용

- 통신 프로토콜 구성
- 프로젝트에서 사용할 기술 선택 이유

## 7/29

### 통신 프로토콜 구성

이상치 검출과 LSTM을 통한 예측값을 임베디드 기기로 보내줘야하는 과정이 존재하여 임베디드를 담당하는 타회사와의 **통신 프로토콜**을 구성한다.

**전달**  
PC → 임베디드 장치

**상세 내용**  
자세한 내용은 생략
<br/></br>
### 프로젝트에서 사용할 기술 선택 이유

**1.데이터베이스 선정 : SQLite3를 왜 사용하나?**

현재는 프로젝트에 Mini PC를 사용하여 진행하고있지만, 최종적으로 임베디드 장치를 이용해서 **“스마트 유량계”**를 개발하는 것이 목표이기 때문에 MySQL와 같이 서버가 필요하지 않은 서버리스인 SQLite3를 채택하였다.(SQLite3 같은 경우 임베디드 시스템에서 많이 사용한다.)

**SQLite3의 이점**

1. **경량성과 성능**
- **경량성**: SQLite3는 매우 작은 크기의 라이브러리로, 자원이 제한된 임베디드 시스템에서도 쉽게 사용할 수 
있다.(MySQL과 같은 서버 기반 데이터베이스는 더 많은 리소스와 복잡한 관리가 필요하다.)
- **빠른 속도**: SQLite는 작은 데이터베이스에 대해 매우 빠른 읽기 및 쓰기 성능을 제공한다. 
(임베디드 시스템에서는 일반적으로 대용량 데이터 처리보다는 신속한 데이터 접근이 더 중요하기 때문에 적합하다.)

2. **자체 포함한 데이터베이스**
- **서버리스** : SQLite3는 자체 포함형 데이터베이스로, 별도의 데이터베이스 서버가 필요하지 않는다. 
(임베디드 시스템에서 매우 중요한 이점으로, 시스템 복잡성을 줄이고 유지보수를 용이하게 한다.)
- **단일 파일 데이터베이스**: 모든 데이터가 하나의 파일에 저장되므로, 파일 시스템에서 직접 관리할 수 있다. 
(임베디드 시스템에서 스토리지 관리에 매우 유리하다.)

3. **낮은 메모리 및 CPU 사용량**
- **효율적인 자원 사용**: SQLite는 매우 낮은 메모리와 CPU 사용량을 필요로 한다. 
(임베디드 시스템과 같은 자원이 제한된 환경에서 중요하다.)
- **빠른 응답 시간**: 작은 크기의 데이터베이스와 최적화된 내부 알고리즘 덕분에, 데이터에 빠르게 접근할 수 있다.

**2.스케줄러 선정 : APScheduler vs Airflow**

현재 프로젝트에서 특정 시간에 실행해야할 작업들이 존재한다. (이상치 검출, 예측값 도출…)

이걸 도와주는 라이브러리(APSheduler)와 프레임워크(Airflow)에 관한 간단하게 설명하자면 다음과 같다.

- **APScheduler (Advanced Python Scheduler)**
    - **주요 기능:** 파이썬 기반의 스케줄러로, 작업을 특정 시간이나 주기에 실행할 수 있게 해준다.
    - **특징:** 경량이며, 사용이 간편하고 자원이 제한된 환경에서도 사용 가능하다.
- **Apache Airflow**
    - **주요 기능:** 복잡한 데이터 파이프라인 및 워크플로우를 관리하고 스케줄링하는 도구이다.
    - **특징:** 복잡한 작업 간의 종속성 관리가 가능하며, 웹 기반 UI를 통해 작업 흐름을 시각화하고 모니터링할 수 있다. 주로 대규모 데이터 처리와 분석에 사용된다.

위 내용을 요약하면, APScheduler는 간단하고 가벼운 스케줄링 작업에 적합하고, Airflow는 복잡한 워크플로우 관리에 적합하다는 것을 알 수 있다. 결국 해당 프로젝트는 최종적으로 임베디드 장치에 적용하는 것이 목표이므로 **APScheduler**를 적용하는 것이 타당하다는 것을 알 수 있다.   
추가적으로 타당한 이유를 자세하게 설명하자면 다음과 같다. 

**Airflow**

- 장점:
    - 복잡한 워크플로우 관리 : DAG를 통해 작업간의 복잡한 종속성 및 조건부 실행 처리 가능
    - 확장성 : 다양한 서비스 및 도구와 쉽게 통합할 수 있는 플러그인(기능) 제공
    - 사용자 인터페이스 : 웹 기반 UI를 제공하여 DAG를 시각화하고 작업 진행 상황을 모니터링하여 워크플로우 관리를 쉽게 관리 가능
- 단점:
    - 자원 사용량 : 위에 정리한 장점을 수행하기 위한 상당한 시스템 자원(CPU, MEM, 스토리지)이 필요
    - 복잡한 설정 : 초기 설정 및 구성 과정이 복잡

**APScheduler**

- 장점:
    - 경량 : APScheduler는 경량이며 최소한의 시스템 자원만 필요
    - 간단한 API : 작업을 예약하기 위한 간단한 API를 제공
- 단점:
    - 단순한 작업에 적합 : APScheduler는 단순한 스케줄링 작업에 적합하며 Airflow처럼 복잡한 워크플로우 종속성을 지원하지 않음
    - UI 없음 : 웹 UI가 없어 작업을 모니터링하고 관리하기 위해 자체적인 구현 필요

자세하게 알아본 결과 자원이 제한된 임베디드 시스템 환경에서는 경량성을 가진 **APScheduler**가 적합함을 알 수 있고, 추후 프로젝트의 작업(기능)이 복잡해질 경우 Airflow 도입을 고려할 수 있을 것 같다.