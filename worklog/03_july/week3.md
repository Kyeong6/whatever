# 업무내용

- 파이프라인 개발 관련 내용 정리

## 7/15

### 파이프라인 개발 일정

현재 이상치 기능에 대한 정의가 설정되어있지않아 **예측값 기능**을 먼저 개발한 후 이상치 기능을 개발할 예정이다.

### 파이프라인 아키텍처


**SQLite**

<img width="807" alt="Untitled2" src="https://github.com/user-attachments/assets/985fe1de-5bc2-4ebf-9a03-c95af1a5c077">

SQLite를 도입하고, 이후에 성능 최적화를 진행할 예정이다.

### 성능 평가 요소

1. 쓰기 시간(Write)
2. 읽기 시간(Read)
3. 메모리 사용량(MEM)

테스트 과정을 반복수행하여 평균 성능을 측정할 예정이다.

## 7/16

### 프로세스 최종 정리(질문사항 반영)

1. 센서 데이터를 데이터베이스에 적재
    - table1 : 시간, 압력 / 유량 실제값
    - table2 : 시간, 압력 / 유량 예측값
    - table을 나누는 이유는 실제값은 1 min, 예측값은 1 hr이기 때문
2. 이상치 검출(압력 / 유량)
    - 시스템 이상
        1. 공통 : 0 / null
        2. 압력 : 10 Pa(대기압력) 이상(수식 변환 필요)
        3. 유량 :  평균값 기준 10배 이상(기존 데이터를 통해 값 정해짐)
    - 실제값
        1. 정규분포 4단계
            - 0단계 : 정상
            - 1단계 관심 : 90 ≤ value ≤ 95
            - 2단계 주의 : 95 ≤ value < 98
            - 3단계 경계 : 98 ≤ value < 99
            - 4단계 심각 : 99 ≤ value ≤ 100
    - 예측값
        1. $\frac{예측값 - 실제값}{실제값}\times{100}$ 값이  $\pm 10\sim40$일 경우 십의자리로 단계(총 4단계) 설정
        2. 예측은 구현을 위해서 전날의 해당 시간대의 예측값 사용
    - 야간 최소 유량(야간 시간 : 1 ~ 5)
        1. 야간 최소 유량 시간대의 평균값(사전에 정의)의 변동보다  $\pm 10\sim40$이상일 경우(총 4단계) 
3. 예측(압력 / 유량)
    - LSTM 예측을 iD(day) + 1h(hour) 개념 도입(i = 1 ~ 7)
4. 결과값 전송(서버)
5. 데이터베이스에 예측값 삽입(예측값)
6. 기간 설정해서 해당 블록에 실제값 기반으로 재학습(정책상 1년 동안 데이터를 보유하므로 1년 주기로 데이터 학습 진행)